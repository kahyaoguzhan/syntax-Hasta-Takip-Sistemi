<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biyodijital Motor Analiz Terminali</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 70% 30%;
            gap: 20px;
        }

        .panel {
            background: #2d2d2d;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .panel-title {
            color: #00d4ff;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #404040;
        }

        .control-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        label {
            color: #e0e0e0;
            font-size: 13px;
        }

        select,
        input {
            background: #3d3d3d;
            border: 1px solid #555555;
            border-radius: 5px;
            padding: 8px 12px;
            color: #e0e0e0;
            font-size: 13px;
            transition: all 0.3s;
        }

        select:hover,
        input:hover {
            border-color: #00d4ff;
        }

        button {
            background: #3d3d3d;
            border: 1px solid #555555;
            border-radius: 5px;
            padding: 8px 15px;
            color: #e0e0e0;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 13px;
        }

        button:hover {
            background: #4d4d4d;
            border-color: #00d4ff;
        }

        button:active {
            background: #2d2d2d;
        }

        button:disabled {
            background: #2a2a2a;
            color: #666666;
            border-color: #333333;
            cursor: not-allowed;
        }

        .btn-start {
            background: #00a86b;
            border-color: #00c97a;
        }

        .btn-start:hover:not(:disabled) {
            background: #00c97a;
        }

        .btn-stop {
            background: #d9534f;
            border-color: #e74c3c;
        }

        .btn-stop:hover:not(:disabled) {
            background: #e74c3c;
        }

        .status-indicator {
            font-weight: bold;
            margin-left: auto;
        }

        .status-disconnected {
            color: #d9534f;
        }

        .status-connected {
            color: #00a86b;
        }

        .status-stopped {
            color: #999999;
        }

        .status-running {
            color: #00a86b;
        }

        .status-completed {
            color: #00d4ff;
        }

        .module-grid {
            display: grid;
            grid-template-columns: auto 1fr 1fr 1fr;
            gap: 10px;
            align-items: center;
            margin-top: 15px;
        }

        .module-label {
            font-weight: normal;
            font-size: 13px;
        }

        .graph-container {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
            height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .graph-title {
            position: absolute;
            top: 10px;
            left: 20px;
            color: #00d4ff;
            font-size: 12px;
            font-weight: bold;
        }

        .graph-placeholder {
            color: #666666;
            font-size: 14px;
            text-align: center;
        }

        canvas {
            width: 100%;
            height: 100%;
        }

        .stats-row {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
        }

        .stat-item {
            color: #e0e0e0;
            font-size: 13px;
        }

        .ai-panel {
            background: #2d2d2d;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 20px;
            height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
        }

        .ai-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .ai-result {
            flex: 1;
            background: #1a1a1a;
            border: 1px solid #404040;
            border-radius: 5px;
            padding: 15px;
            overflow-y: auto;
            font-family: 'Consolas', monospace;
            font-size: 12px;
            line-height: 1.6;
            color: #b0b0b0;
        }

        .status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #252525;
            border-top: 1px solid #404040;
            padding: 8px 20px;
            color: #b0b0b0;
            font-size: 12px;
            z-index: 1000;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #2d2d2d;
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: #555555;
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #00d4ff;
        }

        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
            }

            .ai-panel {
                height: 500px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Sol Panel - Mod√ºller -->
        <div class="left-panel">
            <!-- Kontrol Paneli -->
            <div class="panel">
                <div class="panel-title">Kontrol Paneli</div>

                <div class="control-row">
                    <label>Seri Port:</label>
                    <select id="portSelect">
                        <option>COM3</option>
                        <option>COM4</option>
                        <option>COM5</option>
                    </select>
                    <button id="connectBtn" onclick="toggleConnection()">Baƒülan</button>
                    <span class="status-indicator status-disconnected" id="connectionStatus">‚óè Baƒülƒ± Deƒüil</span>
                </div>

                <div class="panel" style="margin-top: 15px;">
                    <div class="panel-title">Mod√ºl Kontrolleri</div>

                    <div class="module-grid">
                        <span class="module-label">Mod√ºl A (Tremor):</span>
                        <button class="btn-start" onclick="startModule('A')">Ba≈ülat (1)</button>
                        <button class="btn-stop" disabled id="stopA">Durdur</button>
                        <span class="status-indicator status-stopped" id="statusA">‚óè Durduruldu</span>

                        <span class="module-label">Mod√ºl B (Bradikinezi):</span>
                        <button class="btn-start" onclick="startModule('B')">Ba≈ülat (2)</button>
                        <button class="btn-stop" disabled id="stopB">Durdur</button>
                        <span class="status-indicator status-stopped" id="statusB">‚óè Durduruldu</span>

                        <span class="module-label">Mod√ºl C (Koordinasyon):</span>
                        <button class="btn-start" onclick="startModule('C')">Ba≈ülat (3)</button>
                        <button class="btn-stop" disabled id="stopC">Durdur</button>
                        <span class="status-indicator status-stopped" id="statusC">‚óè Durduruldu</span>
                    </div>
                </div>
            </div>

            <!-- Mod√ºl A -->
            <div class="panel">
                <div class="panel-title">MOD√úL A: Tremor Analizi (LDR Sens√∂r)</div>
                <div class="graph-container">
                    <div class="graph-title">LDR Sinyal</div>
                    <canvas id="graphA"></canvas>
                </div>
            </div>

            <!-- Mod√ºl B -->
            <div class="panel">
                <div class="panel-title">MOD√úL B: Bradikinezi Analizi (Mesafe Sens√∂r√º)</div>
                <div class="graph-container">
                    <div class="graph-title">Mesafe √ñl√ß√ºm√º</div>
                    <canvas id="graphB"></canvas>
                </div>
            </div>

            <!-- Mod√ºl C -->
            <div class="panel">
                <div class="panel-title">MOD√úL C: Koordinasyon Testi (Reaksiyon Zamanƒ±)</div>
                <div class="stats-row">
                    <div class="stat-item" id="totalPresses">Toplam Basƒ±≈ü: 0/20</div>
                    <div class="stat-item" id="avgReaction">Ortalama: - ms</div>
                </div>
                <div class="graph-container">
                    <div class="graph-title">Reaksiyon Zamanlarƒ±</div>
                    <canvas id="graphC"></canvas>
                </div>
            </div>
        </div>

        <!-- Saƒü Panel - AI Analiz -->
        <div class="ai-panel">
            <div class="panel-title">AI Analiz Sonu√ßlarƒ±</div>

            <div class="ai-controls">
                <button class="btn-start" onclick="runAIAnalysis()">Son Analizi √áalƒ±≈ütƒ±r</button>
                <button class="btn-start" onclick="runHistoricalAnalysis()">Ge√ßmi≈ü Analizleri ƒ∞ncele</button>
                <span class="status-indicator status-stopped" id="aiStatus">‚óè Hazƒ±r</span>
            </div>

            <div class="ai-result" id="aiResult">
                AI analiz sonu√ßlarƒ± burada g√∂r√ºnecek...

                T√ºm mod√ºlleri tamamladƒ±ktan sonra analiz otomatik √ßalƒ±≈üacak.
            </div>
        </div>
    </div>

    <div class="status-bar" id="statusBar">Hazƒ±r</div>

    <script>
        let isConnected = false;
        let runningModules = { A: false, B: false, C: false };
        let graphContexts = {
            A: null,
            B: null,
            C: null
        };
        let graphData = {
            A: { time: [], values: [] },
            B: { time: [], values: [] },
            C: { trials: [], reactions: [] }
        };

        // Initialize graphs
        window.addEventListener('load', () => {
            graphContexts.A = document.getElementById('graphA').getContext('2d');
            graphContexts.B = document.getElementById('graphB').getContext('2d');
            graphContexts.C = document.getElementById('graphC').getContext('2d');

            // Set canvas size
            ['graphA', 'graphB', 'graphC'].forEach(id => {
                const canvas = document.getElementById(id);
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
            });
        });

        function toggleConnection() {
            isConnected = !isConnected;
            const btn = document.getElementById('connectBtn');
            const status = document.getElementById('connectionStatus');

            if (isConnected) {
                btn.textContent = 'Baƒülantƒ±yƒ± Kes';
                status.textContent = '‚óè Baƒülƒ±';
                status.className = 'status-indicator status-connected';
                updateStatusBar('Arduino\'ya baƒülandƒ±');
            } else {
                btn.textContent = 'Baƒülan';
                status.textContent = '‚óè Baƒülƒ± Deƒüil';
                status.className = 'status-indicator status-disconnected';
                updateStatusBar('Baƒülantƒ± kesildi');
            }
        }

        function startModule(module) {
            if (!isConnected) {
                updateStatusBar('√ñnce Arduino\'ya baƒülanƒ±n!');
                return;
            }

            runningModules[module] = true;
            const stopBtn = document.getElementById('stop' + module);
            const statusEl = document.getElementById('status' + module);

            stopBtn.disabled = false;
            statusEl.textContent = '‚óè √áalƒ±≈üƒ±yor';
            statusEl.className = 'status-indicator status-running';
            updateStatusBar(`Mod√ºl ${module} ba≈ülatƒ±ldƒ±`);

            // Simulate data collection
            simulateData(module);
        }

        function stopModule(module) {
            runningModules[module] = false;
            const stopBtn = document.getElementById('stop' + module);
            const statusEl = document.getElementById('status' + module);

            stopBtn.disabled = true;
            statusEl.textContent = '‚óè Durduruldu';
            statusEl.className = 'status-indicator status-stopped';
            updateStatusBar(`Mod√ºl ${module} durduruldu`);
        }

        function simulateData(module) {
            if (!runningModules[module]) return;

            const time = graphData[module].time.length * 0.1;

            if (module === 'A') {
                // LDR simulation
                const value = 500 + Math.random() * 100 + Math.sin(time * 2) * 50;
                graphData.A.time.push(time);
                graphData.A.values.push(value);
                drawGraph('A', '#00d4ff', 'LDR Deƒüeri', 0, 800);
            } else if (module === 'B') {
                // Distance simulation
                const value = 100 + Math.random() * 50 + Math.sin(time * 3) * 20;
                graphData.B.time.push(time);
                graphData.B.values.push(value);
                drawGraph('B', '#00ff88', 'Mesafe (mm)', 0, 200);
            } else if (module === 'C') {
                // Reaction time simulation
                if (graphData.C.trials.length < 20) {
                    const trial = graphData.C.trials.length + 1;
                    const reaction = 400 + Math.random() * 400;
                    graphData.C.trials.push(trial);
                    graphData.C.reactions.push(reaction);

                    document.getElementById('totalPresses').textContent = `Toplam Basƒ±≈ü: ${trial}/20`;
                    const avg = graphData.C.reactions.reduce((a, b) => a + b, 0) / graphData.C.reactions.length;
                    document.getElementById('avgReaction').textContent = `Ortalama: ${avg.toFixed(0)} ms`;

                    drawScatterGraph('C', '#ffaa00', 'Reaksiyon (ms)', 0, 1000);

                    if (trial >= 20) {
                        setTimeout(() => {
                            stopModule('C');
                            document.getElementById('statusC').textContent = '‚óè Tamamlandƒ±';
                            document.getElementById('statusC').className = 'status-indicator status-completed';
                        }, 1000);
                        return;
                    }
                }
            }

            // Auto-stop after 10 seconds for A and B
            if ((module === 'A' || module === 'B') && time >= 10) {
                stopModule(module);
                document.getElementById('status' + module).textContent = '‚óè Tamamlandƒ±';
                document.getElementById('status' + module).className = 'status-indicator status-completed';
                return;
            }

            setTimeout(() => simulateData(module), module === 'C' ? 2000 : 100);
        }

        function drawGraph(module, color, label, minY, maxY) {
            const ctx = graphContexts[module];
            const canvas = ctx.canvas;
            const data = graphData[module];

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (data.time.length === 0) return;

            const padding = 40;
            const graphWidth = canvas.width - padding * 2;
            const graphHeight = canvas.height - padding * 2;

            // Draw grid
            ctx.strokeStyle = '#404040';
            ctx.lineWidth = 0.5;
            for (let i = 0; i <= 5; i++) {
                const y = padding + (graphHeight / 5) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(canvas.width - padding, y);
                ctx.stroke();
            }

            // Draw data
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();

            const maxTime = Math.max(...data.time);
            const range = maxY - minY;

            data.time.forEach((t, i) => {
                const x = padding + (t / maxTime) * graphWidth;
                const y = canvas.height - padding - ((data.values[i] - minY) / range) * graphHeight;

                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });

            ctx.stroke();
        }

        function drawScatterGraph(module, color, label, minY, maxY) {
            const ctx = graphContexts[module];
            const canvas = ctx.canvas;
            const data = graphData[module];

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (data.trials.length === 0) return;

            const padding = 40;
            const graphWidth = canvas.width - padding * 2;
            const graphHeight = canvas.height - padding * 2;

            // Draw grid
            ctx.strokeStyle = '#404040';
            ctx.lineWidth = 0.5;
            for (let i = 0; i <= 5; i++) {
                const y = padding + (graphHeight / 5) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(canvas.width - padding, y);
                ctx.stroke();
            }

            // Draw points
            ctx.fillStyle = color;
            const range = maxY - minY;

            data.trials.forEach((trial, i) => {
                const x = padding + ((trial - 1) / 19) * graphWidth;
                const y = canvas.height - padding - ((data.reactions[i] - minY) / range) * graphHeight;

                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function runAIAnalysis() {
            updateStatusBar('AI Analizi ba≈ülatƒ±lƒ±yor...');
            document.getElementById('aiStatus').textContent = '‚óè Y√ºkleniyor...';
            document.getElementById('aiStatus').className = 'status-indicator status-running';

            const result = document.getElementById('aiResult');
            result.textContent = 'üìä Analiz ba≈ülatƒ±ldƒ±...\n\n';

            setTimeout(() => {
                result.textContent += '‚úÖ Mod√ºl A analiz tamamlandƒ±\n';
                result.textContent += '‚úÖ Mod√ºl B analiz tamamlandƒ±\n';
                result.textContent += '‚úÖ Mod√ºl C analiz tamamlandƒ±\n\n';
                result.textContent += 'AI yanƒ±tƒ±:\n';
                result.textContent += '‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n';
                result.textContent += 'Analiz sonu√ßlarƒ± deƒüerlendiriliyor...\n';
                result.textContent += '(Bu web versiyonunda AI entegrasyonu devre dƒ±≈üƒ±dƒ±r)\n';

                document.getElementById('aiStatus').textContent = '‚óè Tamamlandƒ±';
                document.getElementById('aiStatus').className = 'status-indicator status-completed';
                updateStatusBar('AI Analizi tamamlandƒ±');
            }, 2000);
        }

        function runHistoricalAnalysis() {
            updateStatusBar('Ge√ßmi≈ü analizler y√ºkleniyor...');
            const result = document.getElementById('aiResult');
            result.textContent = 'üìÅ Ge√ßmi≈ü analizler aranƒ±yor...\n\n';
            result.textContent += '(Bu web versiyonunda ge√ßmi≈ü veri g√∂sterimi devre dƒ±≈üƒ±dƒ±r)\n';
        }

        function updateStatusBar(message) {
            document.getElementById('statusBar').textContent = message;
        }
    </script>
</body>

</html>